language: rust
rust:
  - nightly-2018-04-06

addons:
  apt:
    sources:
      - deadsnakes
    packages:
      - python3.5

cache:
  - cargo
  - apt

install:
  - git clone https://github.com/konstin/pyo3
  - cd pyo3
  - git checkout reusable_codegen
  - cd ..
  - git clone https://github.com/konstin/helix
  - cd helix
  - git checkout split_out_init
  - cd ..

script:
  - alias python3=python3.5
  - ./test.sh